{% extends "layout.html" %}

{% block title %}{{ equipment.objeto }} - Detalhes do Equipamento{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
    <h2>Detalhes do Equipamento</h2>
    <div style="display: flex; gap: 12px;">
        <a href="{{ url_for('edit_equipment', id=equipment.id) }}" class="btn-primary">Editar</a>
        <a href="{{ url_for('index') }}" class="btn-cancel">Voltar à Lista</a>
    </div>
</div>

<div class="equipment-details">
    <div class="details-grid">
        <div class="detail-item">
            <div class="detail-label">Nº do Bem</div>
            <div class="detail-value">{{ equipment.num_bem }}</div>
        </div>

        <div class="detail-item">
            <div class="detail-label">Categoria</div>
            <div class="detail-value">{{ equipment.categoria }}</div>
        </div>

        <div class="detail-item">
            <div class="detail-label">Objeto</div>
            <div class="detail-value">{{ equipment.objeto }}</div>
        </div>

        <div class="detail-item">
            <div class="detail-label">Modelo</div>
            <div class="detail-value">{{ equipment.modelo }}</div>
        </div>

        <div class="detail-item">
            <div class="detail-label">Data de Aquisição</div>
            <div class="detail-value">{{ equipment.data_aquisicao.strftime('%d/%m/%Y') if equipment.data_aquisicao else '-' }}</div>
        </div>

        <div class="detail-item">
            <div class="detail-label">Nota Fiscal</div>
            <div class="detail-value">{{ equipment.nota_fiscal }}</div>
        </div>

        <div class="detail-item">
            <div class="detail-label">Valor</div>
            <div class="detail-value">R$ {{ "%.2f"|format(equipment.valor) }}</div>
        </div>

        <div class="detail-item">
            <div class="detail-label">Estado de Conservação</div>
            <div class="detail-value">
                <span class="status-badge status-{{ equipment.estado_conservacao.lower() }}">
                    {{ equipment.estado_conservacao }}
                </span>
            </div>
        </div>

        <div class="detail-item">
            <div class="detail-label">Setor Alocado</div>
            <div class="detail-value">{{ equipment.setor_alocado }}</div>
        </div>

        <div class="detail-item">
            <div class="detail-label">Responsável / Operador</div>
            <div class="detail-value">{{ equipment.responsavel_operador }}</div>
        </div>

        <div class="detail-item">
            <div class="detail-label">Data de Entrega</div>
            <div class="detail-value">{{ equipment.data_entrega.strftime('%d/%m/%Y') if equipment.data_entrega else '-' }}</div>
        </div>

        <div class="detail-item">
            <div class="detail-label">Manutenção Dada</div>
            <div class="detail-value">{{ equipment.manutencao_dada or '-' }}</div>
        </div>
    </div>

    {% if equipment.servico_realizado %}
    <div class="detail-item" style="margin-top: 30px; padding-top: 30px; border-top: 2px solid #f1f1f1;">
        <div class="detail-label">Serviço Realizado</div>
        <div class="detail-value" style="white-space: pre-wrap; line-height: 1.6;">{{ equipment.servico_realizado }}</div>
    </div>
    {% endif %}

    <div class="form-actions" style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #e8e8e8;">
        <form method="POST" action="{{ url_for('delete_equipment', id=equipment.id) }}" style="display: inline;" onsubmit="return confirmDelete('{{ equipment.objeto }}');">
            <button type="submit" class="btn-small btn-delete" style="padding: 12px 20px; font-size: 14px;">Excluir Equipamento</button>
        </form>
        <a href="{{ url_for('edit_equipment', id=equipment.id) }}" class="btn-submit">Editar Equipamento</a>
    </div>
</div>

<style>
.status-badge {
    padding: 6px 12px;
    border-radius: 16px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    display: inline-block;
}

.status-novo {
    background-color: #dcfce7;
    color: #166534;
}

.status-bom {
    background-color: #dbeafe;
    color: #1e40af;
}

.status-regular {
    background-color: #fef3c7;
    color: #92400e;
}

.status-ruim {
    background-color: #fed7aa;
    color: #c2410c;
}

.status-péssimo {
    background-color: #fecaca;
    color: #991b1b;
}

.equipment-details {
    position: relative;
}

.equipment-details::before {
    content: '';
    position: absolute;
    top: -10px;
    left: -10px;
    right: -10px;
    bottom: -10px;
    background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
    border-radius: 16px;
    z-index: -1;
}

@media (max-width: 768px) {
    .details-grid {
        grid-template-columns: 1fr;
    }
    
    .form-actions {
        flex-direction: column;
        gap: 12px;
    }
    
    .form-actions .btn-submit,
    .form-actions .btn-small {
        width: 100%;
        text-align: center;
    }
}
</style>
{% endblock %}
